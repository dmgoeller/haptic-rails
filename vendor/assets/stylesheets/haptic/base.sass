
@mixin container
  align-items: stretch
  display: flex
  flex-direction: column

@mixin grayed
  filter: grayscale(1)
  opacity: 0.5
  pointer-events: none

/**********************************************************************
 * Buttons
 **********************************************************************/

.haptic-button
  align-items: center
  cursor: pointer
  display: flex
  justify-content: center
  transition-delay: .1s
  transition-duration: .4s
  transition-timing-function: linear

  &.filled, &.outlined, &.text
    display: grid
    grid-auto-flow: column
    overflow: hidden
    text-overflow: ellipsis
    white-space: nowrap

button, input[type="submit"]
  &.haptic-button
    appearance: none

    &:disabled
      @include grayed

    &:focus, &:focus-visible
      transition-delay: 0

/**********************************************************************
 * Chips and segmented buttons
 **********************************************************************/

.haptic-button-segment, .haptic-chip
  @include container
  position: relative

  input
    appearance: none
    cursor: pointer
    position: absolute
    transition: .4s linear

    &::after
      -webkit-mask-image: url('checkmark.svg')
      content: '\200b'
      mask-image: url('checkmark.svg')
      pointer-events: none
      position: absolute
      transition: .4s linear

    &:disabled
      @include grayed

  label
    overflow: hidden
    pointer-events: none
    position: absolute
    text-align: center
    text-overflow: ellipsis
    transition: .4s linear
    white-space: nowrap

  input:disabled ~ label
    @include grayed

.haptic-segmented-button
  display: grid
  grid-auto-flow: column

/**********************************************************************
 * Fields
 **********************************************************************/

input, select, textarea
  &.haptic-field
    transition: opacity .4s linear, filter .4s

    &:not([data-embedded]):disabled
      @include grayed

input[type="number"].haptic-field
  &::-webkit-inner-spin-button
    appearance: none

select.haptic-field
  appearance: none

textarea.haptic-field
  appearance: none
  overflow: hidden
  resize: none

haptic-text-field
  @include container
  transition: .4s linear // opacity, filter

  .container
    @include container
    position: relative

  .field_with_errors
    @include container

  &[focus-indicator]
    .container::after
      content: '\200b'
      opacity: 0
      pointer-events: none
      position: absolute
      transition: opacity .4s linear

  &[focus-indicator][focus]
    .container::after
      opacity: 1

  label
    overflow: hidden
    pointer-events: none
    position: absolute
    text-overflow: ellipsis
    transition-duration: .4s
    transition-property: color, font-size, top
    transition-timing-function: linear
    white-space: nowrap

  &[required]
    label::after
      content: ' *'

  .clear-button, .error-icon, .leading-icon, .trailing-icon
    align-items: center
    display: flex
    justify-content: center
    position: absolute

  .error-icon, .leading-icon, .trailing-icon
    pointer-events: none

  .clear-button
    cursor: pointer
    transition: .4s linear

  &[empty]
    .clear-button
      opacity: 0
      pointer-events: none

  &[disabled]
    @include grayed

    .clear-button
      pointer-events: none

/**********************************************************************
 * Checkboxes and radio buttons
 **********************************************************************/

.haptic-checkbox, .haptic-radio-button
  cursor: pointer
  position: relative
  transition: .4s linear

  &::before, &::after
    content: '\200b'
    pointer-events: none
    position: absolute
    transition: background-color .1s linear

.haptic-checkbox::after
  -webkit-mask-image: url('checkbox-checked.svg')
  mask-image: url('checkbox-checked.svg')

input[type="checkbox"].haptic-checkbox,
input[type="radio"].haptic-radio-button
  appearance: none

  &:disabled
    @include grayed

/**********************************************************************
 * Switches
 **********************************************************************/

.haptic-switch
  cursor: pointer
  position: relative
  transition: opacity .4s linear, filter .4s linear, background-color .2s linear

  &::after
    content: '\200b'
    pointer-events: none
    position: absolute
    transition: .2s linear

input[type="checkbox"].haptic-switch
  appearance: none

  &:disabled
    @include grayed

/**********************************************************************
 * Labels
 **********************************************************************/

.haptic-label
  transition: opacity .4s linear, filter .4s linear

  &[data-disabled]
    @include grayed
